<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="../stylesheets/core.css" media="screen">
    <link rel="stylesheet" href="../stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)">

    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-storage.js"></script>

    <title>PC Builder</title>
    
  </head>

  <body>


    <script>
        var firebaseConfig = {
          apiKey: "AIzaSyDQCO5r-ICvbJe4FIKkPeq8Ayh-NT_cTqU",
          authDomain: "pc-builder-283416.firebaseapp.com",
          databaseURL: "https://pc-builder-283416.firebaseio.com",
          projectId: "pc-builder-283416",
          storageBucket: "pc-builder-283416.appspot.com",
          messagingSenderId: "521975959454",
          appId: "1:521975959454:web:f2377f67fe2adbdfc8108f",
          measurementId: "G-26MWMG7FCD"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
      </script>



    <h1>Toronto's Premium Gaming Computer Reseller</h1>
    <p><a href="https://www.kijiji.ca/o-profile/1012850972/listings/1" target="_blank">Link to my Kijiji page!</a></p>
    
    <table class="table_of_contents" style="table-layout: fixed;">
    <th><a href="about.html">About</a></th><th><a href="products.html">Products</a></th><th><a href="previousbuilds.html">Previous Builds</a></th><th><a href="contact.html">Contact Me</a></th>
    
    </table>
    


    <div>
        <p>
          
            <table class="previous_builds_table" style="table-layout: fixed;">
                </table>

                <script>

                    var db = firebase.firestore();
                    var storage = firebase.storage();
                    var storageRef = storage.ref();
                    var imageURL = "";
                    var path = "";
                    var list_of_computers = "";

                    buildList(imageURL);
                    async function buildList(imageURL){
                    await db.collection("previous_builds").get().then((querySnapshot) => {
                        querySnapshot.forEach((doc) => {
                          path = storageRef.child(doc.id + '.JPG');
                          getURL(path, doc);  
                        });
                    });

                    }

                    async function getURL(path, doc){
                      await path.getDownloadURL().then(function(url){
                        sendURL(url, doc);
                        }).catch(function(error) {
                        console.error(error);
                        });
                    }

                    async function sendURL(path, doc){
                        list(path, doc);
                    }

                    async function list(path, doc){
                      list_of_computers += "<tr><button class=\"previous_builds\" data-toggle=\"collapse\" data-target=\"#info\">" + doc.data().cpu + "</button>" +
                                "<div id=\"info\" class=\"collapse\">" + 
                                "<div class=\"preview_image\"><img style=\"float: right;\" src=\"" + path + "\">" +
                                "<p3>" + doc.data().cpu + " & " + doc.data().gpu + "</p3></div><br>" + 
                                "<div class=\"preview_description\"><p4>CPU Name: " + doc.data().cpu + "<br>" + 
                                "CPU Cores: " + doc.data().cpu_cores + "<br>" + 
                                "CPU Threads: " + doc.data().cpu_threads + "<br>" + 
                                
                                
                                "<a href=\"\"></a>LINK: " + doc.data().cpu +
                                "</p4></div></div></tr>";

                            console.log(doc.data());
                            document.getElementsByClassName("previous_builds_table")[0].innerHTML = list_of_computers;
                            console.log(list_of_computers);
                            
                            var coll = document.getElementsByClassName("previous_builds");
                            var i;
                    
                            for (i = 0; i < coll.length; i++) {
                              coll[i].addEventListener("click", function() {
                              this.classList.toggle("active");
                              var content = this.nextElementSibling;
                              if (content.style.maxHeight){
                                  content.style.maxHeight = null;
                              } else {
                                  content.style.maxHeight = content.scrollHeight + "px";
                               } 
                              });
                            }
                    }






                  




                </script>
            
    
        </p>
    </div>


  </body>
</html>
